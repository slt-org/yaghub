<!DOCTYPE html>
<html>

<head>
  <base target="_top" />
</head>

<body>
  <h2>Cuboid Calculation</h2>

  <label for="length"> Length </label>
  <input type="number" id="length" name="length" min="0" max="100"/><br><br>
  <label for="width"> Width </label>&nbsp;
  <input type="number" id="width" name="width" min="0" max="100"/><br><br>
  <label for="height"> Height </label>
  <input type="number" id="height" name="height" min="0" max="100"/><br><br>
  <span>  </span>
  <input id="submitBtn" type="submit" value="Submit" onclick="sendData()"/><br><br>

  <div id="result">
    <em> Batch Recipe </em>
  </div>

  <script>
    /**
         * Send number to Google Apps Script and returns a calculated 
         * value back to display on page. 
         */
      function sendData() {
        //Get inputted number and result div
        let _length = document.querySelector('#length').value;
        let _width = document.querySelector('#width').value;
        let _height = document.querySelector('#height').value;
        var dataToSend = createData(_length,_width,_height);

        let updateLocation = document.querySelector('#result');
        
        //If the Google Apps script fails this error will be displayed
        // under result. 
        // NOTE!!! not advisable for public deployment.
        //function onFailure(error){
        //  let warning = `<span style="color:red">${error}</span>`;
        //  updateLocation.innerHTML = warning;
        //};
        

        function onSuccess(returnedValue) {
          console.log(returnedValue);
          updateLocation.innerHTML = returnedValue;
        }

        /** First tests if GAS code is successful,
          * attempts to run GAS-side function.
          * on failure sends to onFailure function with nature of error.
          * on success sends to onSuccess function with returned result.
          */
        //google.script.run.withSuccessHandler(onSuccess)
        //                 .withFailureHandler(onFailure)
        //                 .getNumberFromWebAPP(dataToSend);

        google.script.run.withSuccessHandler(onSuccess).getNumberFromWebAPP(dataToSend);

      };

      /**
       * this method takes the text input values and turns 
       * them into json
       */    
      function createData(_length,_width,_height){
        console.log("in createData");
        var data = new Object();
          data.length = _length;
          data.width = _width;
          data.height = _height;
          var string = JSON.stringify(data);
          return string;
      };
 </script>
</body>

</html>