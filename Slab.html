<!DOCTYPE html>
<html>

<head>
  <base target="_top" />
</head>

<body>
  <h2>Slab Calculation</h2>

  <label for="length"> Length </label> 
  <input type="number" id="length" name="length" min="0" max="100"/>  centimeters<br><br>
  <label for="width"> Width </label>
  <input type="number" id="width" name="width" min="0" max="100"/>  centimeters<br><br>
  <label for="height"> Height </label>
  <input type="number" id="height" name="height" min="0" max="100"/>  centimeters<br><br>
    <p><b>Please select your preferred units of measure for recipe output :</b></p>
  <div>
    <label for="units">Output units: </label>
    <input type="radio" name="units" value="metric">Metric
    <input type="radio" name="units" value="imperial">Imperial
  </div>
<br>
  <input id="submitBtn" type="submit" value="Submit" onclick="sendData()"/><br><br>

  <div id="result">
    <em> Batch Recipe </em>
  </div>

  <script>
    /**
         * Send number to Google Apps Script and returns a calculated 
         * value back to display on page. 
         */
      function sendData() {
        //Get inputted number and result div
        let _length = document.querySelector('#length').value;
        let _width  = document.querySelector('#width').value;
        let _height = document.querySelector('#height').value;
        let _units  = document.querySelector('input[name=units]:checked').value; 

        var dataToSend = createData(_length,_width,_height,_units);

        let updateLocation = document.querySelector('#result');
        
        function onSuccess(returnedValue) {
          console.log(returnedValue);
          updateLocation.innerHTML = returnedValue;
        }

        console.log("Cuboid sendData: "+JSON.stringify(dataToSend));

        google.script.run.withSuccessHandler(onSuccess).mGetCuboidRecipeFromWebAPP(dataToSend);

      };

      /**
       * this method takes the text input values and turns 
       * them into json
       */    
      function createData(_length,_width,_height,_units){
        console.log("in createData");
        var data = new Object();
          data.length = _length;
          data.width = _width;
          data.height = _height;
          data.units = _units;
          var string = JSON.stringify(data);
          return string;
      };
 </script>
</body>

</html>